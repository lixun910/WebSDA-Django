<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>GeoDa.app</title>
<style>
</style>
<script src="jquery.min.js"></script>
<script src="d3.v3.min.js"></script>
<script src="geoviz.js"></script>
<script>
$(document).ready(function() {
  //$('#mapCanvas').width(winW).height(winH);


  d3.json("http://127.0.0.1:8000/media/temp/nat.json",function(error,json){
    
    var minX = Number.POSITIVE_INFINITY,
        maxX = Number.NEGATIVE_INFINITY,
        minY = Number.POSITIVE_INFINITY,
        maxY = Number.NEGATIVE_INFINITY;

    json.features.forEach(function(feat,i) {
      feat.geometry.coordinates.forEach(function(coords,j) {
        coords.forEach( function( xy,k ) {
          x = xy[0], y = xy[1];
          if (x > maxX) {maxX = x;}
          if (x < minX) {minX = x;}
          if (y > maxY) {maxY = y;}
          if (y < minY) {minY = y;}
        });
      });
    });

    var extent = [minX, maxX, minY, maxY];
    var map = new GeoVizMap(json, document.getElementById('mapCanvas'), extent);
    map.version;
    map.draw();
  });
});
</script>
<body>
<canvas id="mapCanvas" width=600 height=800></canvas>
</body>
</html>
